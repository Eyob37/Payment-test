<!DOCTYPE html>
<html>
<head>
  <title>Google Drive API</title>
</head>
<body>

<button onclick="signIn()">Sign In</button>
<button onclick="listFiles()">List Files</button>

<script src="https://accounts.google.com/gsi/client"></script>
<script src="https://apis.google.com/js/api.js"></script>

<script>
const CLIENT_ID = "789202929495-8ga0rfnv1m9ea0g4p48lmfvraa739aa8.apps.googleusercontent.com";
const API_KEY = "AIzaSyC2HJNSHQbJ6b3hpmborEq1tnxmj8BsQ30";
const SCOPES = "https://www.googleapis.com/auth/drive.readonly";

let tokenClient;

function initGapi() {
  gapi.load("client", async () => {
    await gapi.client.init({
      apiKey: API_KEY,
      discoveryDocs: [
        "https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"
      ]
    });
  });

  tokenClient = google.accounts.oauth2.initTokenClient({
    client_id: CLIENT_ID,
    scope: SCOPES,
    callback: (tokenResponse) => {
      gapi.client.setToken(tokenResponse);
      console.log("Signed in");
    }
  });
}

function signIn() {
  tokenClient.requestAccessToken();
}

async function listFiles() {
  const res = await gapi.client.drive.files.list({
    pageSize: 10,
    fields: "files(id, name)"
  });
  console.log(res.result.files);
}

initGapi();
</script>

</body>
</html>